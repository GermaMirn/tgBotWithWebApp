# Процесс работы с Git

Данный документ описывает стандартизированный процесс работы с репозиторием для всех участников команды. Следование этому гайду обеспечивает порядок в истории коммитов и упрощает код-ревью.

---
#### Общая схема работы
1. **Получить задачу**
2. **Создать ветку** от указанной в задаче базовой ветки
3. **Выполнить задачу** и сделать коммиты
4. **Запушить** ветку в удаленный репозиторий
5. **Создать Pull Request (PR)**  для целевой ветки
6. **Пройти код-ревью**, исправить замечания (если есть)
7. **После аппрува** — смержить PR в целевую ветку

---
#### Подробное описание
##### 1. Подготовка к работе
перед началом работы убедитесь, что ваш локальный репозиторий синхронизирован с удалённым

```bash
# Переключиться на главную ветку (чаще всего - main или master)
git checkout main

# Получить последние изменения из удаленного репозитория
git pull origin main
```


##### 2. Создание ветки для задачи
Ветка создается **от ветки, указанной в задаче** (обычно это `main`)

**Формат имени ветки:** `{тип-ветки}-{номер-задачи}`
- managment-1
- backend-92
- frontend-17

```bash
# Переключиться на базовую ветку (указана в задаче)
git checkout main

# Создать новую ветку и сразу переключиться на неё
git checkout -b managment-1
```


##### 3. Выполнение задачи и коммиты
Делайте коммиты по мере готовности логических частей задачи. Пишите **понятные сообщения** к коммитам.

**Форматт коммита: [{тип-ветки}-{номер-задачи}] - fix bug**
- [managment-1] - add doc for gitflow
- [backend-92] - init modals for students service
- [frontend-17] - refactor profile page

```bash
# Добавить измененные файлы в staging area
git add .

# Или добавить конкретный файл
git add src/components/GroupModal.vue

# Создать коммит с описанием
git commit -m "[frontend-17] - refactor profile page"
```


##### 4. Актуализация ветки, пуш ветки и создание Pull Request
Перед тем как запушить ветку, рекомендуется обновить её из базовой ветки, чтобы избежать конфликтов в будущем

```bash
# Получить последние изменения из удаленного репозитория
git fetch origin

# Обновить свою ветку относительно актуальной main ИЛИ альтернативный способ - сделать merge
git rebase origin/main

git merge origin/main
```

Когда задача готова, запушите ветку в удаленный репозиторий и создайте PR.

```bash
# Запушить ветку в удаленный репозиторий (в первый раз)
git push -u origin frontend-17

# Если ветка уже была запущена ранее
git push
```

После пуша:
1. Перейдите на страницу вашего репозитория в GitHub
2. система скорее всего сама предложит создать Pull Request
3. **Важно:** Убедитесь, что вы выбираете **правильную целевую ветку** (ту, от которой вы создавали свою ветку!)
4. В названии MR укажите номер задачи и суть (`frontend-17: Добавлено модальное окно создания группы`)
5. Добавьте ревьювера


##### 5. Прохождение код-ревью
- Реагируйте на комментарии ревьювера
- Для внесения правок просто делайте новые коммиты в **эту же ветку** и пушите их — PR обновится автоматически


##### 6. Мерж и завершение задачи
После получения аппрува от ревьюера нужно **обновить локальную главную ветку:**

```bash
git checkout main
git pull origin main
```

---
#### Важные правила
- **Никогда не пушим прямо в `main` или `dev`!** Только через PR
- **Одна ветка — одна задача.** Не смешивайте несвязанные изменения
- **Ветка должна быть актуальной.** Если в целевую ветку внесли изменения, сделайте `git rebase` или `merge` в свою ветку, чтобы избежать конфликтов
- **Название ветки и коммитов должно содержать номер задачи**
